# æ•°æ®åº“æ‹†åˆ†è®¾è®¡è¯´æ˜

## ğŸ¯ **æ‹†åˆ†åŸåˆ™**

åŸºäºä¸šåŠ¡ç‰¹æ€§å’Œæ€§èƒ½éœ€æ±‚ï¼Œå°†åŸæœ‰æ•°æ®åº“æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„æ•°æ®åº“ï¼š

### 1. **ç®¡ç†ç«¯æ•°æ®åº“ (lore_admin)**
- **ç”¨é€”**: ç³»ç»Ÿé…ç½®ã€å†…å®¹ç®¡ç†ã€æ•°æ®åˆ†æã€è¿è¥ç®¡ç†
- **ç‰¹ç‚¹**: å†™å…¥é¢‘ç‡ä½ï¼Œè¯»å–é¢‘ç‡ä¸­ç­‰ï¼Œæ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜
- **ç”¨æˆ·**: ç®¡ç†å‘˜ã€è¿è¥äººå‘˜ã€å†…å®¹ç¼–è¾‘

### 2. **Cç«¯ä¸šåŠ¡æ•°æ®åº“ (lore_business)**
- **ç”¨é€”**: ç”¨æˆ·æ•°æ®ã€å­¦ä¹ è®°å½•ã€æµ‹è¯„ç»“æœã€ä¸ªæ€§åŒ–æ¨è
- **ç‰¹ç‚¹**: é«˜å¹¶å‘è¯»å†™ï¼Œå®æ—¶æ€§è¦æ±‚é«˜ï¼Œæ•°æ®é‡å¤§
- **ç”¨æˆ·**: æ™®é€šå­¦ä¹ ç”¨æˆ·

## ğŸ“Š **è¡¨ç»“æ„åˆ†å¸ƒ**

### ç®¡ç†ç«¯æ•°æ®åº“ (lore_admin)
| è¡¨å | ç”¨é€” | ç‰¹ç‚¹ |
|------|------|------|
| career_targets | èŒä¸šç›®æ ‡ç®¡ç† | é…ç½®æ•°æ®ï¼Œå˜æ›´é¢‘ç‡ä½ |
| learning_paths | å­¦ä¹ è·¯å¾„ç®¡ç† | AIç”Ÿæˆå†…å®¹ï¼Œç»“æ„åŒ–æ•°æ® |
| knowledge_points | çŸ¥è¯†ç‚¹ä½“ç³» | å†…å®¹ç®¡ç†ï¼Œå…³è”å…³ç³»å¤æ‚ |
| question_bank | é¢˜åº“ç®¡ç† | å†…å®¹æ•°æ®ï¼Œéœ€è¦ç‰ˆæœ¬æ§åˆ¶ |
| learning_contents | å­¦ä¹ å†…å®¹ç®¡ç† | å¤šåª’ä½“å†…å®¹ï¼Œå­˜å‚¨é‡å¤§ |
| system_configs | ç³»ç»Ÿé…ç½® | å…¨å±€é…ç½®ï¼Œé«˜ä¸€è‡´æ€§è¦æ±‚ |
| admin_users | ç®¡ç†å‘˜ç”¨æˆ· | æƒé™ç®¡ç†ï¼Œå®‰å…¨æ€§è¦æ±‚é«˜ |
| operation_logs | æ“ä½œæ—¥å¿— | å®¡è®¡è¿½è¸ªï¼Œåªå¢ä¸æ”¹ |
| data_statistics | æ•°æ®ç»Ÿè®¡ | æ±‡æ€»æ•°æ®ï¼Œå®šæ—¶æ›´æ–° |

### Cç«¯ä¸šåŠ¡æ•°æ®åº“ (lore_business)
| è¡¨å | ç”¨é€” | ç‰¹ç‚¹ |
|------|------|------|
| users | ç”¨æˆ·åŸºç¡€ä¿¡æ¯ | é«˜å¹¶å‘è¯»å†™ï¼Œç”¨æˆ·é‡å¤§ |
| user_learning_profiles | ç”¨æˆ·å­¦ä¹ æ¡£æ¡ˆ | ä¸ªæ€§åŒ–æ•°æ®ï¼Œé¢‘ç¹æ›´æ–° |
| user_knowledge_mastery | çŸ¥è¯†ç‚¹æŒæ¡æƒ…å†µ | å­¦ä¹ è¿›åº¦ï¼Œå®æ—¶æ›´æ–° |
| ai_assessments | AIæµ‹è¯„è®°å½• | æµ‹è¯„æ•°æ®ï¼Œæ•°æ®é‡å¤§ |
| personalized_learning_plans | ä¸ªæ€§åŒ–å­¦ä¹ è®¡åˆ’ | AIç”Ÿæˆï¼ŒåŠ¨æ€è°ƒæ•´ |
| learning_behavior_analytics | å­¦ä¹ è¡Œä¸ºåˆ†æ | è¡Œä¸ºæ•°æ®ï¼Œé«˜é¢‘å†™å…¥ |
| ai_recommendations | AIæ¨èè®°å½• | æ¨èç®—æ³•ï¼Œå®æ—¶è®¡ç®— |
| vector_embeddings | å‘é‡æ•°æ®åº“æ˜ å°„ | å‘é‡æ•°æ®ï¼Œé«˜ç»´è®¡ç®— |
| user_learning_records | ç”¨æˆ·å­¦ä¹ è®°å½• | å­¦ä¹ è½¨è¿¹ï¼Œæµ·é‡æ•°æ® |
| user_achievements | ç”¨æˆ·æˆå°± | æ¿€åŠ±ç³»ç»Ÿï¼Œæ¸¸æˆåŒ–å…ƒç´  |

## ğŸ”„ **è·¨åº“å…³è”å¤„ç†**

### 1. **å¤–é”®å…³ç³»å¤„ç†**
ç”±äºæ•°æ®åº“æ‹†åˆ†ï¼ŒåŸæœ‰çš„å¤–é”®çº¦æŸéœ€è¦åœ¨åº”ç”¨å±‚å¤„ç†ï¼š

```java
// ç¤ºä¾‹ï¼šè·å–ç”¨æˆ·å­¦ä¹ æ¡£æ¡ˆæ—¶éœ€è¦å…³è”èŒä¸šç›®æ ‡ä¿¡æ¯
@Service
public class UserLearningService {
    
    @Autowired
    private UserLearningProfileMapper userLearningProfileMapper; // businessåº“
    
    @Autowired
    private CareerTargetMapper careerTargetMapper; // adminåº“
    
    public UserLearningProfileVO getUserLearningProfile(Long userId) {
        // 1. ä»businessåº“è·å–ç”¨æˆ·å­¦ä¹ æ¡£æ¡ˆ
        UserLearningProfile profile = userLearningProfileMapper.selectByUserId(userId);
        
        // 2. ä»adminåº“è·å–èŒä¸šç›®æ ‡ä¿¡æ¯
        CareerTarget careerTarget = careerTargetMapper.selectById(profile.getCareerTargetId());
        
        // 3. ç»„è£…è¿”å›æ•°æ®
        return UserLearningProfileVO.builder()
            .profile(profile)
            .careerTarget(careerTarget)
            .build();
    }
}
```

### 2. **æ•°æ®åŒæ­¥ç­–ç•¥**
- **é…ç½®æ•°æ®åŒæ­¥**: ç®¡ç†ç«¯çš„é…ç½®å˜æ›´éœ€è¦åŒæ­¥åˆ°Cç«¯ç¼“å­˜
- **ç»Ÿè®¡æ•°æ®æ±‡æ€»**: Cç«¯çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®å®šæœŸæ±‡æ€»åˆ°ç®¡ç†ç«¯
- **å†…å®¹å‘å¸ƒæµç¨‹**: ç®¡ç†ç«¯å†…å®¹å®¡æ ¸é€šè¿‡åå‘å¸ƒåˆ°Cç«¯

## âš¡ **æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**

### 1. **ç®¡ç†ç«¯ä¼˜åŒ– (lore_admin)**
- **è¯»å†™åˆ†ç¦»**: é…ç½®è¯»å¤šå†™å°‘çš„ç‰¹ç‚¹ï¼Œä½¿ç”¨è¯»å†™åˆ†ç¦»
- **ç¼“å­˜ç­–ç•¥**: é…ç½®æ•°æ®ä½¿ç”¨Redisç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›
- **ç´¢å¼•ä¼˜åŒ–**: é’ˆå¯¹æŸ¥è¯¢åœºæ™¯å»ºç«‹åˆé€‚çš„ç´¢å¼•

### 2. **Cç«¯ä¼˜åŒ– (lore_business)**
- **åˆ†åº“åˆ†è¡¨**: ç”¨æˆ·ç›¸å…³è¡¨æŒ‰ç”¨æˆ·IDåˆ†è¡¨ï¼Œå­¦ä¹ è®°å½•æŒ‰æ—¶é—´åˆ†è¡¨
- **è¯»å†™åˆ†ç¦»**: ä¸»ä»å¤åˆ¶ï¼Œè¯»å†™åˆ†ç¦»
- **ç¼“å­˜ç­–ç•¥**: ç”¨æˆ·ç”»åƒã€æ¨èç»“æœç­‰çƒ­ç‚¹æ•°æ®ç¼“å­˜
- **å¼‚æ­¥å¤„ç†**: å­¦ä¹ è¡Œä¸ºåˆ†æã€æ¨èè®¡ç®—ç­‰å¼‚æ­¥å¤„ç†

## ğŸ”§ **æ•°æ®æºé…ç½®**

### Spring Bootå¤šæ•°æ®æºé…ç½®ç¤ºä¾‹ï¼š

```yaml
spring:
  datasource:
    admin:
      driver-class-name: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://localhost:3306/lore_admin?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
      username: root
      password: password
      hikari:
        maximum-pool-size: 20
        minimum-idle: 5
    business:
      driver-class-name: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://localhost:3306/lore_business?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai
      username: root
      password: password
      hikari:
        maximum-pool-size: 50
        minimum-idle: 10
```

### MyBatisé…ç½®ï¼š

```java
@Configuration
public class DataSourceConfig {
    
    @Bean
    @Primary
    @ConfigurationProperties("spring.datasource.business")
    public DataSource businessDataSource() {
        return DataSourceBuilder.create().build();
    }
    
    @Bean
    @ConfigurationProperties("spring.datasource.admin")
    public DataSource adminDataSource() {
        return DataSourceBuilder.create().build();
    }
    
    @Bean
    @Primary
    public SqlSessionFactory businessSqlSessionFactory() throws Exception {
        SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();
        factoryBean.setDataSource(businessDataSource());
        return factoryBean.getObject();
    }
    
    @Bean
    public SqlSessionFactory adminSqlSessionFactory() throws Exception {
        SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();
        factoryBean.setDataSource(adminDataSource());
        return factoryBean.getObject();
    }
}
```

## ğŸ“ˆ **ç›‘æ§å’Œè¿ç»´**

### 1. **æ€§èƒ½ç›‘æ§**
- **QPSç›‘æ§**: åˆ†åˆ«ç›‘æ§ä¸¤ä¸ªæ•°æ®åº“çš„QPS
- **æ…¢æŸ¥è¯¢ç›‘æ§**: å®šæœŸåˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—
- **è¿æ¥æ± ç›‘æ§**: ç›‘æ§è¿æ¥æ± ä½¿ç”¨æƒ…å†µ

### 2. **å®¹é‡è§„åˆ’**
- **ç®¡ç†ç«¯**: é¢„ä¼°æ•°æ®å¢é•¿ç¼“æ…¢ï¼Œé‡ç‚¹å…³æ³¨å†…å®¹å­˜å‚¨
- **Cç«¯**: é¢„ä¼°ç”¨æˆ·å¢é•¿å’Œå­¦ä¹ æ•°æ®å¢é•¿ï¼Œåˆ¶å®šåˆ†è¡¨ç­–ç•¥

### 3. **å¤‡ä»½ç­–ç•¥**
- **ç®¡ç†ç«¯**: å…¨é‡å¤‡ä»½ + å¢é‡å¤‡ä»½ï¼Œé‡ç‚¹ä¿æŠ¤é…ç½®æ•°æ®
- **Cç«¯**: åˆ†è¡¨å¤‡ä»½ï¼Œç”¨æˆ·æ•°æ®å’Œå­¦ä¹ è®°å½•åˆ†åˆ«å¤‡ä»½

## ğŸš€ **éƒ¨ç½²å»ºè®®**

### 1. **ç¡¬ä»¶é…ç½®**
- **ç®¡ç†ç«¯**: ä¸­ç­‰é…ç½®ï¼ŒSSDå­˜å‚¨ï¼Œé‡ç‚¹ä¿è¯ç¨³å®šæ€§
- **Cç«¯**: é«˜é…ç½®ï¼ŒSSDå­˜å‚¨ï¼Œé‡ç‚¹ä¿è¯æ€§èƒ½

### 2. **ç½‘ç»œæ¶æ„**
- **å†…ç½‘éš”ç¦»**: ç®¡ç†ç«¯å’ŒCç«¯æ•°æ®åº“ç½‘ç»œéš”ç¦»
- **è®¿é—®æ§åˆ¶**: ä¸¥æ ¼çš„IPç™½åå•å’Œæƒé™æ§åˆ¶

### 3. **æ‰©å±•æ€§**
- **å‚ç›´æ‰©å±•**: ä¼˜å…ˆè€ƒè™‘ç¡¬ä»¶å‡çº§
- **æ°´å¹³æ‰©å±•**: Cç«¯æ•°æ®åº“æ”¯æŒåˆ†åº“åˆ†è¡¨æ‰©å±•

è¿™ç§æ‹†åˆ†æ–¹æ¡ˆèƒ½å¤Ÿæœ‰æ•ˆåº”å¯¹ä¸åŒä¸šåŠ¡åœºæ™¯çš„æ€§èƒ½éœ€æ±‚ï¼ŒåŒæ—¶ä¿è¯æ•°æ®çš„å®‰å…¨æ€§å’Œä¸€è‡´æ€§ã€‚
